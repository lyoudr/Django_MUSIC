### ECS Fargate
version : 1
task_definition :
  ecs_network_mode : awsvpc
  task_execution_role : ecsTaskExecutionRole
  task_size :
    mem_limit : 0.5GB
    cpu_limit : 256
  services:
    postgres_db : 
      cpu_shares : 80
      mem_limit : 300MB

    ann_server_1 :
      cpu_shares : 80
      mem_limit : 300MB
      # set "depends_on" in ecs-params instead of setting in docker-copmose.yml
      depends_on : 
        - container_name : postgres_db
          condition : HEALTHY
    nginx :
      cpu_shares : 80
      mem_limit : 300MB
      depends_on:
        - container_name : ann_server_1
          condition : HEALTHY

run_params :
  network_configuration :
    awsvpc_configuration :
      subnets :
        - "subnet-01524ee0d9e24a0d9" # Configuring these subnets "Route Table" to "internet gateway" to make it public subnets
        - "subnet-06a6b43bb34ac7986"
      security_groups :
        - "sg-01fc50da545eedb0c" # the security group have to allow HTTP 80
      assign_public_ip : ENABLED
